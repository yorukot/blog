---
import { Icon } from "astro-icon/components";

const typeIcons: Record<string, { icon: string; color: string }> = {
  "Teaching": { icon: "tabler:school", color: "hsl(270, 60%, 60%)" },
  "Volunteer": { icon: "tabler:users", color: "hsl(141, 71%, 48%)" },
  "Competition": { icon: "tabler:trophy", color: "hsl(45, 100%, 55%)" },
  "Event": { icon: "tabler:calendar-event-filled", color: "hsl(171, 90.50%, 71.20%)" },
  "Conference": { icon: "tabler:microphone", color: "hsl(24, 84.40%, 65%)" },
  "Academic": { icon: "tabler:file-text", color: "hsl(141, 71%, 48%)" },
  "Training": { icon: "tabler:certificate", color: "hsl(210, 50%, 55%)" }
};

const experiences = [
  {
    title: "Instructor @ SITCON Camp 2025",
    type: "Teaching",
    description: "Served as an instructor at SITCON Camp, teaching programming and technology skills to students.",
    date: "2025"
  },
  {
    title: "Staff Member @ SITCON Camp 2025",
    type: "Volunteer",
    description: "Worked as a staff member for SITCON Camp, helping organize and coordinate educational activities.",
    date: "2025"
  },
  {
    title: "Contestant @ Google DevJam",
    type: "Competition",
    description: "Participated in Google DevJam focusing on Gemini API development and AI integration. Achieved 2nd place.",
    date: "2025"
  },
  {
    title: "Contestant @ Taipei-New Taipei Programming Hackathon Dashboard Competition",
    type: "Competition",
    description: "Advanced to the finals in the Taipei-New Taipei Programming Hackathon Dashboard Competition.",
    date: "2025"
  },
  {
    title: "Contestant @ NTTU Maker Marathon",
    type: "Competition",
    description: "Achieved the Judges' Award in the National Taitung University Maker Marathon, showcasing innovative solutions.",
    date: "2025"
  },
  {
    title: "Contestant @ Japan AI Koshien",
    type: "Competition",
    description: "Participated in Japan AI Koshien, competing in AI and machine learning challenges. Achieved 3rd place.",
    date: "2025"
  },
  {
    title: "Participant @ Shanghai HackClub Juice",
    type: "Event",
    description: "Participated in Shanghai HackClub Juice, met and conversed with HackClub founder Zach, and built the Juice Jump project as part of the event.",
    date: "2025"
  },
  {
    title: "Staff Member @ Scrapyard Taiwan",
    type: "Event",
    description: "Participated in a maker community event, exploring hardware hacking and creative technology projects.",
    date: "2025"
  },
  {
    title: "Speaker @ SITCON 2025",
    type: "Conference",
    description: "Delivered a keynote talk titled \"How to Reach 1,000 Stars? Practical Lessons from Successful Open Source Projects\" at the Students' Information Technology Conference.",
    date: "2025"
  },
  {
    title: "Contestant @ Research Paper Competition",
    type: "Academic",
    description: "Received Grade A for the research paper \"Performance Analysis and Discussion of Parallel Computing.\"",
    date: "2025"
  },
  {
    title: "Trainee @ NTHU HPC Winter Camp 2025",
    type: "Training",
    description: "Participated in the High-Performance Computing Winter Camp at National Tsing Hua University.",
    date: "2025"
  },
  {
    title: "Contestant @ Academic Subject Competition",
    type: "Competition",
    description: "Participated in academic subject competitions, demonstrating excellence in STEM fields.",
    date: "2024"
  },
  {
    title: "Trainee @ AIS3 Training Camp",
    type: "Training",
    description: "Completed the Advanced Information Security Summer School, gaining cybersecurity and information security skills.",
    date: "2024"
  },
  {
    title: "Contestant @ Golden Shield Award",
    type: "Competition",
    description: "Advanced to the finals in the Golden Shield Award, competing in cybersecurity and information security challenges.",
    date: "2023"
  }
];

---

<div class="container mx-auto px-4">
  <section class="py-6 md:py-12">
    <div class="relative z-10 w-full max-w-6xl mx-auto">
      <!-- Section Header -->
      <div class="text-left mb-8">
        <h2 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-3 text-text">
          <span style="color: var(--color-primary);">Experience</span>
        </h2>
        <p class="text-base md:text-lg text-text-muted leading-relaxed">
          Competitions, events, and activities I've participated in
        </p>
      </div>

      <!-- Experience Timeline -->
      <div class="relative space-y-3">
        {experiences.map((experience, index) => {
          const typeInfo = typeIcons[experience.type];
          return (
          <div class="relative flex items-start space-x-3 group cursor-pointer">
            <!-- Timeline Icon -->
            <div class="flex-shrink-0 mt-0.5 relative z-10">
              <div 
                class="w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:w-10 group-hover:h-10"
                style={`background: ${typeInfo.color}20; border: 2px solid ${typeInfo.color};`}
              >
                <Icon 
                  name={typeInfo.icon}
                  class="w-4 h-4 transition-all duration-300 group-hover:w-5 group-hover:h-5"
                  style={`color: ${typeInfo.color};`}
                />
              </div>
            </div>

            <!-- Experience Content -->
            <div 
              class="flex-1 p-3 rounded-xl transition-all duration-300 group-hover:p-4 group-hover:-translate-y-0.5 group-hover:bg-bg-highlight"
            >
              <!-- Always visible header -->
              <div class="flex items-center justify-between">
                <h3 class="text-base md:text-lg font-bold text-text transition-all duration-300 group-hover:text-lg group-hover:md:text-xl">
                  {experience.title}
                </h3>
                <span class="text-xs text-text-muted ml-3 flex-shrink-0">
                  {experience.date}
                </span>
              </div>

              <!-- Hover-only content -->
              <div class="overflow-hidden transition-all duration-300 max-h-0 group-hover:max-h-20 group-hover:mt-2">
                <div class="flex items-center space-x-2 mb-2">
                  <span 
                    class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium"
                    style={`background: ${typeInfo.color}20; color: ${typeInfo.color};`}
                  >
                    {experience.type}
                  </span>
                </div>
                <p class="text-sm text-text-muted leading-relaxed">
                  {experience.description}
                </p>
              </div>
            </div>

            <!-- Connecting Line (except for last item) -->
            {index < experiences.length && (
              <div 
                class="absolute left-4 top-10 w-0.5 h-6 z-0 transition-all duration-300 group-hover:left-5 group-hover:h-8"
                style="background: var(--color-bg-card);"
              >
              </div>
            )}
          </div>
        )})}
      </div>

      <!-- Additional Info -->
      <div class="mt-8 text-center">
        <p class="text-sm text-text-muted leading-relaxed mb-3">
          Always eager to participate in new events and learn from the community.
        </p>
        <div class="flex justify-center items-center">
          <Icon
            name="icon-park-outline:dot"
            class="mr-2"
            style="color: var(--color-primary);"
            size={20}
          />
          <span class="text-sm text-text">
            Looking forward to more exciting opportunities
          </span>
        </div>
      </div>
    </div>
  </section>
</div>
